<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filters - Inkbase: The Lorcana TCG Tracking App</title>
    <link rel="stylesheet" href="filter_style.css">
</head>
<body>

<div class="filter-header">
    Filters
    <button class="back-button" onclick="location.href='collection.html'">Back</button>
</div>
<form class="filter-container" action="" onsubmit="sendSearch();return false;" id="form-page">
    <div class="filter-section">
        <label for="sort-by">Sort by:</label>
        <select id="sort-by" name="sortBy">
            <option value="NAME">Alphabetical</option>
            <option value="COST">Ink Cost</option>
            <option value="STR">Strength</option>
            <option value="WILL">Will Power</option>
            <option value="LORE">Lore</option>
            <option value="CARDNUM">Number</option>
        </select>
    </div>
    
    <div class="filter-section">
        <label>Colors:</label>
        <label><input type="checkbox" name="colors" value="Amber"> Amber (Yellow)</label>
        <label><input type="checkbox" name="colors" value="Steel"> Steel (Silver)</label>
        <label><input type="checkbox" name="colors" value="Sapphire"> Sapphire (Blue)</label>
        <label><input type="checkbox" name="colors" value="Ruby"> Ruby (Red)</label>
        <label><input type="checkbox" name="colors" value="Emerald"> Emerald (Green)</label>
    </div>

    <div class="filter-section">
        <label for="card-text">Card Text:</label>
        <input type="text" id="card-text" placeholder='"rush" or "bodyguard"' name="cardText">
    </div>

    <div class="filter-section">
        <label for="set">Set:</label>
        <select id="set" name="set">
            <option value="None">None</option>
            <option value="TFC">The First Chapter</option>
            <option value="ROTF">Rise of the Floodborn</option>
            <option value="ITI">Into the Inklands</option>
        </select>
    </div>

    <div class="filter-section">
        <label for="rarity">Rarity:</label>
        <select id="rarity" name="rarity">
            <option value="None">None</option>
            <option value="Legendary">Legendary</option>
            <option value="Super Rare">Super Rare</option>
            <option value="Rare">Rare</option>
            <option value="Uncommon">Uncommon</option>
            <option value="Common">Common</option>
        </select>
    </div>

    <div class="filter-section">
        <label for="ink-cost">Ink Cost:</label>
        <input type="text" id="ink-cost" placeholder='"4" or "7"' name="inkCost">
    </div>

    <div class="filter-section" style="display: none;">
        <input type="text" id="card-name" placeholder='' name="cardName" >
    </div>

    <!--
    <div class="filter-section">
        <label for="cost">Cost:</label>
        <input type="text" id="cost" placeholder='"<= 2"' name="cost">
    </div>
    -->
    
    <script>
        async function sendSearch() {
            var form = document.getElementById("form-page");
            var formData = new FormData(form);
            const queryString = new URLSearchParams(formData).toString();
            //console.log(queryString + " checking query string in filter");
            const response = await fetch("http://127.0.0.1:3000/api/data?" + queryString, {
                method: "GET",
            });
            console.log("get function finised");
            
            console.log((await response.json())[0].NAME);
           // console.log(response[0])
            
        } 
    </script>
    <button class="search-button" type="submit">Search...</button>
</form>
</body>
</html>
